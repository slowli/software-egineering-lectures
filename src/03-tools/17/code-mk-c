# !Декларации макросов.!
CC=gcc
# !Первая цель построения (используется по умолчанию).!
all: main

# !Создание исполняемого файла main на основе объектных файлов.!
# !\$@ — встроенный макрос, заменяющийся на текущую цель построения;!
# !\$< — встроенный макрос, заменяющийся на первую из зависимостей;!
# !\$\texthat{} — встроенный макрос, заменяющийся на список зависимостей.!
main: main.o other.o
	$(CC) $(LDFLAGS) -o $@ $^
# !Макросы LDFLAGS (дополнительные опции компоновщика) и CFLAGS (опции компилятора)!
# !не заданы в файле и по умолчанию равны пустой строке.!
# !Их можно переопределить при вызове make: make CFLAGS="-m64" …!

# !Создание объектных файлов на основе исходного кода.!
main.o: main.c main.h
	$(CC) -c $(CFLAGS) -o $@ $<
other.o: other.c main.h
	$(CC) -c $(CFLAGS) -o $@ $<
