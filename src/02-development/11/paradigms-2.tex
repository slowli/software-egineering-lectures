\documentclass{a4beamer}
\input{lecture-common.def}

\usetikzlibrary{decorations.pathreplacing,shapes.misc}


\lecturetitle{Программная инженерия. Лекция №11 — Парадигмы программирования (часть 2).}
\title[Парадигмы программирования 2]{Парадигмы программирования (часть 2)}
\author{Алексей Островский}
\institute{\small{Физико-технический учебно-научный центр НАН Украины}\vspace{2ex}}
\date{5 декабря 2014 г.}

\begin{document}
	\frame{\titlepage}

	\frame{
		\frametitle{Парадигмы программирования}

		\input{fig-main-paradigms.tex}
	}

	\section[Компоненты]{Компонентно-ориентированное программирование}

	\subsection{Определение}

	\frame{
		\frametitle{Причины появления компонентов}

		\begin{overlayarea}{\textwidth}{0.4\textheight}
			\input{fig-obj-to-components.tex}
		\end{overlayarea}

		\uncover<2->{%
			\vspace{1ex}
			\begin{itemize}
				\item
				\textbf{повторное использование} — объекты/классы тесно связаны между собой, 
				что~затрудняет использование в другой среде;

				\item
				\textbf{модульность} — связанность объектов препятствует выделению автономных модулей;

				\item
				\textbf{быстрая разработка} — затраты на конфигурацию объектов для новой системы чересчур высоки.
			\end{itemize}
		}
	}

	\frame{
		\frametitle{Компонентно-ориентированное программирование}

		\begin{Definition}
			\textbf{Компонентно-ориентированное программирование} \engterm{component-based software engineering} — 
			подход к разработке ПО, основанный на использовании слабо связанных \engterm{loosely coupled} 
			независимых программных компонентов в единой программной системе.
		\end{Definition}

		\vspace{1ex}
		КОП — развитие ООП с акцентом на повторное использование кода (software reuse).

		\vspace{1ex}
		\begin{Definition}
			\textbf{Компонент} — самостоятельный программный продукт, который соответствует определенной компонентной модели 
			и может сочетаться с другими компонентами без~модификации кода согласно заданному стандарту.
		\end{Definition}
	}

	\frame{
		\frametitle{Особенности парадигмы}

		\begin{itemize}
			\item
			\textbf{Разделение интерфейса и реализации} — интерфейс полностью определяет функциональность компонента; 
			его~реализация может прозрачно измениться, в~т.\,ч.~во~время~исполнения программы.

			\item
			\textbf{Использование стандартов} — спецификация определений интерфейсов и~формата взаимодействия компонентов. 
			Компонент может~быть написан на~любом~ЯП при~соблюдении стандартов.

			\item
			\textbf{Промежуточный слой} \engterm{middleware}, реализующий взаимодействие между~компонентами.

			\item
			\textbf{Процесс разработки}, оптимизированный для~работы с~компонентами повторного использования.
		\end{itemize}
	}

	\subsection{Характеристики компонентов}

	\frame{
		\frametitle{Характеристики компонентов}

		\begin{itemize}
			\item
			\textbf{Стандартизация} — соответствие компонентной модели, в которой находится компонент. 
			Модель определяет способ задания интерфейса, метаданных, документации компонента; 
			инструменты для композиции и развертывания компонентов.

			\item
			\textbf{Независимость} — все зависимости от других компонентов должны быть явно заданы в~интерфейсе.

			\item
			\textbf{Использование в составе системы} — все внешние взаимодействия должны производиться 
			через задекларированные интерфейсы; компонент должен предоставить информацию о своих методах и свойствах.

			\item
			\textbf{Способность к развертыванию} — компонент должен предоставлять имплементацию, 
			которая позволяет развернуть его в определенной среде с~помощью стандартных средств.

			\item
			\textbf{Документация} — интерфейс компонента должен быть документирован для~упрощения его~повторного использования.
		\end{itemize}
	}

	\frame{
		\frametitle{Отличия компонентов от объектов}

		\begin{itemize}
			\item
			Объект выражает одно понятие предметной области; компонент может соответствовать нескольким связанным понятиям.

			\item
			Объекты тесно связаны между собой; компоненты связаны слабо, 
			все зависимости должны быть задекларированы в интерфейсе компонента.

			\item
			Для объектов интерфейс и имплементация тесно связаны между собой (напр., определяются одним ЯП); 
			для компонентов интерфейс и имплементация разграничены.

			\item
			Компоненты не имеют наблюдаемого состояния, все экземпляры компонента неразличимы (выполняется не всегда).
		\end{itemize}
	}

	\frame{
		\frametitle{Интерфейсы компонентов}

		\begin{figure}
			\input{fig-component-uml.tex}
			\caption{UML-диаграмма компонента}
		\end{figure}

		\vspace{2ex}
		\textbf{Сервис} — развитие компонента, в котором отсутствуют зависимости от внешних компонентов.
	}

	\subsection{Компонентная модель}

	\frame{
		\frametitle{Компонентная модель}

		\begin{Definition}
			\textbf{Компонентная модель} — совокупность стандартов, касающихся реализации, документирования и развертывания компонентов.
		\end{Definition}

		\vspace{1ex}
		\textbf{Аспекты компонентной модели:}
		\begin{itemize}
			\item способ задания интерфейса (операции над компонентом, их параметры, генерируемые исключения);
			\item использование компонентов (способ идентификации, конфигурирование, …);
			\item развертывание (организация бинарного кода, необходимого для запуска компонента, 
			напр., используемых сторонних библиотек).
		\end{itemize}

		\vspace{1ex}
		\textbf{Примеры компонентных моделей:}
		\begin{itemize}
			\item Java EE / Enterprise Java Beans;
			\item Microsoft COM, Microsoft .NET;
			\item CORBA.
		\end{itemize}
	}

	\subsection{Разработка с компонентами}

	\frame{
		\frametitle{Разработка с компонентами}

		\textbf{Типы процессов разработки} с использованием компонентов:
		\begin{itemize}
			\item
			Разработка \emph{для} повторного использования \engterm{development for reuse} — разработка программных компонентов, 
			которые могут использоваться в~различных контекстах с~минимальными затратами.

			\vspace{0.75ex}
			\textbf{Составляющие:} обобщение функциональности компонента, минимизация зависимостей, 
			стандартизация обработки исключительных ситуаций, сохранение в~репозиторий, …

			\vspace{2ex}
			\item
			Разработка \emph{с} повторным использованием \engterm{development with reuse} — разработка программных систем, 
			использующих готовые компоненты и сервисы.

			\vspace{0.75ex}
			\textbf{Составляющие:} выработка требований, подбор, тестирование и объединение компонентов в единую систему.
		\end{itemize}
	}

	\section[Аспекты]{Аспектно-ориентированное программирование}

	\frame{
		\frametitle{Аспектно-ориентированное программирование}

		\begin{Definition}
			\textbf{Аспектно-ориентированное программирование} — парадигма программирования, 
			основанная на обеспечении модульности при помощи выделения \emph{сквозной функциональности} в отдельные модули.
		\end{Definition}

		\vspace{2ex}
		\textbf{Принцип разделения ответственности} \engterm{separation of concerns}:

		Каждый элемент компьютерной программы (в ООП — объекты, методы объектов) должен решать строго одну задачу; 
		функции различных элементов не должны перекрываться.

		\vspace{2ex}
		\textbf{Аспектно-ориентированные среды:} AspectJ (на основе Java), AspectC++.
	}

	\subsection{Сквозная функциональность}

	\frame{
		\frametitle{Сквозная функциональность}

		{\small\input{fig-cross-concerns.tex}}
	}

	\frame{
		\frametitle{Сквозная функциональность}

		\begin{Definition}		
			\textbf{Сквозная функциональность} \engterm{cross-cutting concern} — это функциональность программы, 
			которую невозможно полностью выделить в отдельные сущности (классы, методы). 
		\end{Definition}

		\vspace{1ex}
		\textbf{Следствия сквозной функциональности:} 
		\begin{itemize}
			\item дублирование кода; 
			\item сильные зависимости между элементами системы.
		\end{itemize}

		\vspace{1ex}
		\textbf{Примеры сквозной функциональности:} 
		\begin{itemize}
			\item ведение лога;
			\item аутентификация; 
			\item синхронизация; 
			\item кэширование; 
			\item обработка транзакций.
		\end{itemize}
	}

	\subsection{Элементы АОП}

	\frame{
		\frametitle{Терминология АОП}

		\begin{itemize}
			\item
			\textbf{Аспект} — модуль, реализующий сквозную функциональность; 
			содержит определение \emph{срезов} и~связанных~с~ними \emph{советов}.

			\vspace{0.5ex}
			\item
			\textbf{Совет} \engterm{advice} — код, реализующий сквозную функциональность. 
			Совет может выполняться до, после или~вместо основного кода.

			\vspace{0.5ex}
			\item
			\textbf{Точка соединения} \engterm{join point} — точка в~основной программе, 
			в~которой применяется \emph{совет}.

			\vspace{0.5ex}
			\item
			\textbf{Срез} \engterm{pointcut} — набор точек соединения,
			определяющий область применения совета.

			\vspace{0.5ex}
			\item
			\textbf{Внедрение} \engterm{weaving} — изменение основного кода 
			для~добавления функциональности аспекта.
		\end{itemize}
	}

	\frame{
		\frametitle{Модель точек соединения}

		\textbf{Модель точек соединения} \engterm{join point model} — определение возможных мест для~внедрения советов.

		\vspace{2ex}
		\textbf{Точки соединения в AspectJ:}
		\begin{itemize}
		\item вызов методов и конструкторов;
		\item инициализация классов или объектов;
		\item доступ или изменение полей объекта;
		\item обработка исключительных ситуаций.
		\end{itemize}

		\vspace{1ex}
		\textbf{Контекст выполнения:} класс (объект \code{\textbf{this}} / класс, где находится код), пакет.
	}

	\subsection{Примеры}

	\frame{
		\frametitle{Примеры точек соединения}

		\textbf{Точки соединения в AspectJ:}
		\begin{itemize}
			\item
			\code{call(\textbf{void} show())}

			Вызов метода \code{show()} в произвольном классе.

			\vspace{1ex}
			\item
			\code{call(* Point.set*())}

			Вызов метода с названием, начинающимся на \code{set}, в классе \code{Point}.

			\vspace{1ex}
			\item
			\code{within(com.example.*) \&\& call(*.\textbf{new}(\textbf{int}))}

			Вызов конструктора, принимающего один аргумент типа \code{\textbf{int}}, в классах из пакета \code{com.example}.

			\vspace{1ex}
			\item
			\code{handler(ArrayOutOfBoundsException)}

			Обработка исключения \code{ArrayOutOfBoundsException}.

			\vspace{1ex}
			\item
			\code{call(\textbf{protected} !\textbf{static} * *(..))}

			Вызов любого защищенного нестатического метода.
		\end{itemize}
	}

	\frame{
		\frametitle{Пример}

		\textbf{Основной код:}
		\lstinputlisting[language=java]{code-aspect.java}
	}

	\frame{
		\frametitle{Пример}

		\textbf{Код аспекта:}
		\lstinputlisting[language={[aspectj]java}]{code-aspect.aj}
	}

	\subsection{Внедрение аспектов}

	\frame{
		\frametitle{Внедрение аспектов}

		\begin{figure}
			{\small\input{fig-aspect-weaving.tex}}\vspace{-1ex}
			\caption{Внедрение аспектов в AspectJ}
		\end{figure}

		\textbf{Внедрение кода аспектов:}
		\begin{itemize}
			\item на этапе компиляции (как фрагментов исходного кода);
			\item на этапе линковки (как скомпилированных фрагментов) — \textbf{основной способ};
			\item на этапе выполнения (за счет рефлексии).
		\end{itemize}
	}

	\section[Сервисы]{Сервис-ориентированная архитектура}

	\frame{
		\frametitle{Сервис-ориентированная архитектура}

		\begin{Definition}
			\textbf{Сервис-ориентированная архитектура} \engterm{service-oriented architecture} — 
			парадигма программирования, в которой для обеспечения модульности применяются 
			распределенные слабо связанные компоненты (\emph{сервисы}), взаимодействующие с~помощью стандартизованных протоколов.
		\end{Definition}

		\vspace{2ex}
		\textbf{Характеристики сервисов:}
		\begin{itemize}
			\item
			модульность — сервис представляет логически связанные функции 
			в~определенной предметной области с~заданными входами и~выходами;

			\item
			автономность — отсутствие наблюдаемых для пользователей зависимостей;

			\item
			сокрытие реализации — рассматривается как «черный ящик».
		\end{itemize}
	}

	\subsection{Веб-сервисы}

	\frame{
		\frametitle{Веб-сервисы}

		\begin{Definition}
			\textbf{Веб-сервис} — сервис, идентифицирующийся по~адресу URL и~взаимодействующий 
			по~Интернету с~помощью высокоуровневых протоколов на~основе HTTP, TCP/IP.
		\end{Definition}

		\vspace{1ex}
		\begin{figure}
			\input{fig-web-service.tex}\vspace{-1ex}
			\caption{Схема взаимодействия с веб-сервисом}
		\end{figure}
	}

	\frame{
		\frametitle{Спецификация веб-сервисов}

		\textbf{Содержимое спецификации:}
		\begin{itemize}
			\item
			Операции, предоставляемые сервисом ($\simeq$ методы в ООП), соответствующие входные и~возвращаемые данные;
			\item
			формат сообщений для взаимодействия с сервисом;
			\item
			(необязательно) типы данных, используемые в сообщениях;
			\item
			определение конкретных протоколов доступа к операциям (с помощью SOAP или~других методов).
		\end{itemize}

		\vspace{1ex}
		\textbf{Язык описания:} WSDL (web service definition language) — на основе XML.
	}

	\frame{
		\frametitle{Использование веб-сервисов}

		\textbf{Протокол:} SOAP (simple object access protocol) — на основе XML.

		\vspace{1ex}
		\textbf{Сообщение сервису:}
		\begin{itemize}
			\item
			заголовок сообщения — нефункциональные характеристики запроса (приоритетность, время обработки, …);
			\item
			тело сообщения — список операций веб-сервиса и соответствующих параметров.
		\end{itemize}

		\vspace{1ex}
		\textbf{Ответное сообщение:}
		\begin{itemize}
			\item
			тело сообщения — список с результатами выполнения операций;
			\item
			отказы — информация об отказах при проведении операций.
		\end{itemize}
	}

	\subsection{Разработка веб-сервисов}

	\frame{
		\frametitle{Разработка веб-сервисов}

		\textbf{Цели разработки:}
		\begin{itemize}
			\item минимизация количества обращений к сервису;
			\item скрытие состояния сервиса (хранение состояния — задача клиента; 
			состояние может передаваться в сообщениях).
		\end{itemize}

		\vspace{1ex}
		\textbf{Этапы разработки:}
		\begin{enumerate}
			\item определение функциональности; 
			\item описание операций и сообщений; 
			\item имплементация; 
			\item тестирование; 
			\item развертывание.
		\end{enumerate}
	}

	\frame{
		\frametitle{Разработка веб-сервисов}

		\textbf{Средства автоматизации:}
		\begin{itemize}
			\item
			Инструменты для создания WSDL-описания на основе классов.

			\item
			Серверы приложений — веб-серверы, обеспечивающие автоматическое развертывание 
			и~выполнение кода веб-сервиса, а также разбор / формирование SOAP-сообщений 
			и~обмен данными со~средой, где выполняется сервис.

			\item
			Инструменты для автоматической генерации кода на~основе WSDL для~доступа к~сервису как к~локальному объекту.

			\item
			Средства для композиции сервисов (Business Process Execution Language, BPEL).
		\end{itemize}
	}

	\subsection{Альтернативы веб-сервисам}

	\frame{
		\frametitle{Альтернативы веб-сервисам}

		\textbf{Недостатки веб-сервисов на основе SOAP:}
		\begin{itemize}
			\item
			«тяжеловесность» используемых протоколов SOAP и WSDL;
			\item
			необходимость в комплексных средствах поддержки (сервере приложений и~т.\,п.);
			\item
			отсутствие привязок типов данных к языкам программирования.
		\end{itemize}

		\vspace{1ex}
		\textbf{Альтернативные реализации СОА:}
		\begin{itemize}
			\item REST;
			\item CORBA;
			\item DCOM;
			\item Java RMI;
			\item Apache Thrift.
		\end{itemize}
	}

	\section{Заключение}

	\subsection{Выводы}
	
	\frame{
		\frametitle{Выводы}

		\begin{enumerate}
			\item
			ООП в чистом виде обладает некоторыми недостатками, затрудняющими повторное использование кода. 
			Для улучшения повторного использования используются парадигмы на основе ООП, 
			в частности компонентно-ориентированное, аспектное и сервисное программирование.

			\vspace{0.5ex}
			\item
			Компонент — самостоятельный программный продукт, реализующий логически замкнутый набор функций системы. 
			В отличие от объектов и классов, интерфейс и~реализация компонентов всегда разграничены, 
			что упрощает многоязыковую и~мультиплатформенную разработку.

			\vspace{0.5ex}
			\item
			Аспект — модуль, объединяющий сквозную функциональность (напр., ведение лога, обработка исключений). 
			Использование аспектов позволяет избежать дублирования кода и избыточных связей между элементами системы.

			\vspace{0.5ex}
			\item
			Сервис — развитие идеи компонента для распределенных приложений. Для~коммуникации с~сервисами используются сетевые протоколы.
		\end{enumerate}
	}
	
	\subsection{Материалы}
	
	\frame{
		\frametitle{Материалы}
		
		\begin{thebibliography}{9}
			\bibitem[1]{1}
			Sommerville, Ian
			\newblock Software Engineering.
			\newblock {\footnotesize Pearson, 2011. — 790 p.}

			\bibitem[2]{2}
			Лавріщева К.\,М. 
			\newblock Програмна інженерія (підручник). 
			\newblock {\footnotesize К., 2008. — 319 с.}

			\bibitem[3]{3}
			Heineman, G.\,T.; Councill, W.\,T.
			\newblock Component-Based Software Engineering: Putting the Pieces Together.
			\newblock {\footnotesize (компоненты и сервисы)}

			\bibitem[4]{4}
			Jacobson, I.; Ng P.-W.
			\newblock Aspect-Oriented Software Development with Use Cases.
			\newblock {\footnotesize (аспекты)}
		\end{thebibliography}
	}
	
	\frame{
		\frametitle{}
		
		\begin{center}
			\Huge Спасибо за внимание!
		\end{center}
	}
\end{document}
